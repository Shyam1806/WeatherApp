<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="img/weathericon.jpg">
    <link rel="stylesheet" href="css/style2.css">
    <link rel="stylesheet" href="css/responsive.css">
    <script src="js/jquerymin.js"></script>
    <!-- <script src="js/we.js"></script> -->
    <title>WeatherApp</title>
</head>
<body>
    <div class="bg">
        <div class="bginner clearfix">
            <div class="weathermain">
                <div class="weathertop">
                    <h4>Weather App</h4>
                </div>
                <div class="weathermainin">
                    <h2>World Weather Report</h2>
                    <div class="weatherc">
                    <div class="weatherin">
                    <label><h3>City Name:</h3></label>
                </div>
                <div class="weatherout">
                <input type="text" id="ip" placeholder="Enter your city name " class="userip">
                <button onclick="weather()" class="btnclr">Submit</button>
            </div>
        </div>
                 <p id ="errorbx"></p>
                 
                 <div class="weatherlistdown">
                     <h1 id="weatherinfo"></h1>
                     <h3 id ="Weathercity"></h3>
                     <img src="" alt="" id="weicon" class="weiconz">
                     
                     
                 </div>
                 <div class="footer">
                     <h2>Design And Developed By Shyam </h2>
                     <p></p>
                 </div>
            </div>
        </div>
            </div>
    </div>
    

    <script>
 //             $.getJSON('http://api.openweathermap.org/data/2.5/weather?q=London,uk&APPID=57359c75f1c51b5c8454d4224de7d19c' , function(data){
 //     console.log(data);
 // });

     function weather(){
        var ip1 = document.getElementById("ip").value;
        document.getElementById("ip").value ="";
     console.log(ip1);
    
 
 var city = [];
 city = ip1;
 ip2 ="abcdefghijklmnopqrstuvxyz";

 if(city == "" || city == ip2){
        
        alert("Please Enter the data");
      document.getElementById("errorbx").innerHTML = "Please enter for a valid city";
       
 } 
 else if(ip1.value == city){
      document.getElementById("errorbx").innerHTML="";
      
  } 
  async function getWeatherdata(){
              const resp = await fetch('http://api.openweathermap.org/data/2.5/weather?q= '+ city + '&units=imperial&appid=57359c75f1c51b5c8454d4224de7d19c');
              const jsonData = await resp.json();
              return jsonData;
          }
   getWeatherdata() .then(data=> {
       console.log(data)
       if(data !== 404){
           alert(data.message);

       }
       else{

       }
       var a = data.main.temp;
    //    console.log(Math.floor(a) + "" +"F");
      
       
  
  var celsi = ((a-32)*5/9);
//   console.log(Math.floor(celsi));
   var des = data.weather[0].description;
   document.getElementById("weatherinfo").innerHTML = "The Weather is currently" +" " + des;
//    console.log(des);
  var name = data.name;
//   console.log(name);
  document.getElementById("Weathercity").innerHTML ="The temperature in " + name + "" + " is " + celsi + "&deg;" + " C";
  
  
  //   var iconz = t.weather[0].icon;
   var icons =  "http://openweathermap.org/img/w/"+data.weather[0].icon +".png";
   $('#weicon').attr('src'  , icons  );
 
       
  })    
  } 
     
     

     
     
    </script>
 </body>
 </html>   